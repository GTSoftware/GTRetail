<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:gtsoftware="http://xmlns.jcp.org/jsf/composite/gtsoftware">

    <p:fragment id="clienteFragment">
        <h:panelGrid id="clienteActualPanel" columns="2">

            <p:outputLabel  value="#{msg.idCliente}"/>

            <p:inputText id="idClienteField" value="#{nuevaVentaBean.idCliente}" >

                <f:convertNumber integerOnly="true" />
                <f:validateLongRange minimum="0" />

                <p:ajax   listener="#{nuevaVentaBean.buscarClientesPorClave()}" />

                <p:commandButton icon="ui-icon-search"  
                                 update=":formContenido:busquedaPersonasDialog" 
                                 oncomplete="clientesDialog.show()"
                                 process="@none" />

            </p:inputText>
            <p:message id="idClienteMessage" for="idClienteField"/>



            <p:outputLabel for='razonSocialField' value="#{msg.razonSocial}:"/>
            <p:inputText id="razonSocialField" value="#{nuevaVentaBean.ventaActual.idPersona.razonSocial}"
                         readonly="true"/>

            <p:outputLabel value="#{msg.responsabilidadIVA}:"/>
            <p:inputText id="ivaField" value="#{nuevaVentaBean.ventaActual.idPersona.idResponsabilidadIva.nombreResponsabildiad}" 
                         readonly="true"/>

            <p:outputLabel value="#{msg.documento}:"/>
            <p:inputText id="documentoField" value="#{nuevaVentaBean.ventaActual.idPersona.documento}" 
                         readonly="true"/>

            <p:outputLabel value="#{msg.pais}:"/>
            <p:inputText id="nombrePaisField" value="#{nuevaVentaBean.ventaActual.idPersona.idPais.nombrePais}" 
                         readonly="true"/>

            <p:outputLabel value="#{msg.provincia}:"/>
            <p:inputText id="nombreProvinciaField" value="#{nuevaVentaBean.ventaActual.idPersona.idProvincia.nombreProvincia}" 
                         readonly="true"/>

            <p:outputLabel value="#{msg.localidad}:"/>
            <p:inputText id="nombreLocalidadField" value="#{nuevaVentaBean.ventaActual.idPersona.idLocalidad.nombreLocalidad}" 
                         readonly="true"/>

            <p:outputLabel value="#{msg.direccion}:"/>
            <p:inputTextarea id="direccionField" value="#{nuevaVentaBean.ventaActual.idPersona.calle.concat(' ').concat(nuevaVentaBean.ventaActual.idPersona.altura)}" 
                             readonly="true"/>

        </h:panelGrid>
    </p:fragment>


    <p:dialog id='busquedaPersonasDialog' 
              header="#{msg.busquedaClientes}" 
              widgetVar="clientesDialog"
              resizable="true" 
              closeOnEscape="true"
              showEffect="fade" hideEffect="clip" modal="true"> 

        <gtsoftware:busquedaPersonas personaSeleccionada="#{nuevaVentaBean.ventaActual.idPersona}"
                                     textoBusqueda="#{clientesSearchBean.filter.txt}"
                                     busquedaAction="#{clientesSearchBean.doSearch()}"
                                     personasList="#{clientesSearchBean.clientesList}"
                                     >
        </gtsoftware:busquedaPersonas>
        <p:commandButton value="#{msg.ok}" icon="ui-icon-check"
                         oncomplete="clientesDialog.hide()" 
                         update=":formContenido:clienteFragment"/> 


    </p:dialog>  

</html>
